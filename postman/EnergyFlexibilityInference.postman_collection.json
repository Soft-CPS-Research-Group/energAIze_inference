{
  "info": {
    "name": "Energy Flexibility Inference API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "01 - Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "health"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Health responds 200', function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "pm.test('Health payload includes configured flag', function () {",
              "  const body = pm.response.json();",
              "  pm.expect(body).to.have.property('configured');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "02 - Admin Load (RBC)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"manifest_path\": \"{{rbcManifestPath}}\",\n  \"agent_index\": {{agentIndex}},\n  \"artifacts_dir\": null,\n  \"alias_mapping_path\": null\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/admin/load",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "load"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('RBC pipeline loaded', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.status).to.eql('loaded');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "03 - Info (RBC)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/info",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "info"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('RBC info available', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body).to.have.property('algorithm');",
              "  pm.expect(body.action_names).to.include('hvac');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "04 - Inference (RBC: standby)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"features\": {\n    \"mode\": \"standby\"\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/inference",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "inference"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Standby outputs hvac 0', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.actions['0'].hvac).to.eql(0);",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "05 - Inference (RBC: cooling)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"features\": {\n    \"mode\": \"cooling\"\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/inference",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "inference"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Cooling outputs hvac 0.5', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.actions['0'].hvac).to.eql(0.5);",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "06 - Admin Unload (RBC)",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/admin/unload",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "unload"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('RBC pipeline unloaded', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.status).to.eql('unloaded');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "07 - Admin Load (iCharging breaker)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"manifest_path\": \"{{ichargingManifestPath}}\",\n  \"agent_index\": {{agentIndex}},\n  \"artifacts_dir\": null,\n  \"alias_mapping_path\": \"{{ichargingAliasPath}}\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/admin/load",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "load"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('iCharging breaker pipeline loaded', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.status).to.eql('loaded');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "08 - Inference (iCharging baseline)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"features\": {\n    \"timestamp\": \"2025-11-04T09:36:14Z\",\n    \"non_shiftable_load\": 12,\n    \"energy_price\": 0,\n    \"solar_generation\": 2.8,\n    \"charging_sessions\": {\n      \"AC000004_1\": {\"power\": 4.078, \"electric_vehicle\": 11824},\n      \"AC000007_1\": {\"power\": 4.274, \"electric_vehicle\": 11823},\n      \"AC000005_1\": {\"power\": 2.724, \"electric_vehicle\": 11833},\n      \"AC000006_1\": {\"power\": 2.807, \"electric_vehicle\": 11825},\n      \"AC000008_1\": {\"power\": 2.819, \"electric_vehicle\": 11822},\n      \"AC000009_1\": {\"power\": 2.788, \"electric_vehicle\": 11832},\n      \"AC000014_1\": {\"power\": 3.035, \"electric_vehicle\": 11838},\n      \"ACEXT004_1\": {\"power\": 2.979, \"electric_vehicle\": 11821}\n    },\n    \"electric_vehicles\": {\n      \"11824\": {\n        \"SoC\": 0.5,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.95,\n          \"estimated_time_at_departure\": \"2025-11-04T10:30:00Z\",\n          \"capacity_kwh\": 75\n        }\n      },\n      \"11823\": {\n        \"SoC\": 0.2,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.85,\n          \"estimated_time_at_departure\": \"2025-11-04T11:30:00Z\",\n          \"capacity_kwh\": 75\n        }\n      },\n      \"11833\": {\n        \"SoC\": 0.55,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.7,\n          \"estimated_time_at_departure\": \"2025-11-04T13:00:00Z\"\n        }\n      },\n      \"11825\": {\n        \"SoC\": 0.7,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.85,\n          \"estimated_time_at_departure\": \"2025-11-04T12:30:00Z\"\n        }\n      }\n    },\n    \"pv_panels\": {\n      \"PV01\": {\"energy\": 2.8}\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/inference",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "inference"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('iCharging baseline inference responds', function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "pm.test('iCharging baseline includes expected charger keys', function () {",
              "  const body = pm.response.json();",
              "  pm.expect(body.actions['0']).to.have.property('AC000004_1');",
              "  pm.expect(body.actions['0']).to.have.property('AC000007_1');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "09 - Inference (iCharging urgent EV)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"features\": {\n    \"timestamp\": \"2025-11-04T09:00:00Z\",\n    \"non_shiftable_load\": 5,\n    \"energy_price\": 0,\n    \"solar_generation\": 1.5,\n    \"charging_sessions\": {\n      \"AC000004_1\": {\"power\": 0, \"electric_vehicle\": 11824},\n      \"AC000007_1\": {\"power\": 2.0, \"electric_vehicle\": 11823},\n      \"AC000005_1\": {\"power\": 2.0, \"electric_vehicle\": 11833}\n    },\n    \"electric_vehicles\": {\n      \"11824\": {\n        \"SoC\": 0.2,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.95,\n          \"estimated_time_at_departure\": \"2025-11-04T09:15:00Z\",\n          \"capacity_kwh\": 80\n        }\n      },\n      \"11823\": {\n        \"SoC\": 0.6,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.8,\n          \"estimated_time_at_departure\": \"2025-11-04T11:00:00Z\",\n          \"capacity_kwh\": 70\n        }\n      },\n      \"11833\": {\n        \"SoC\": 0.5,\n        \"flexibility\": {\n          \"estimated_soc_at_departure\": 0.6,\n          \"estimated_time_at_departure\": \"2025-11-04T12:00:00Z\"\n        }\n      }\n    },\n    \"pv_panels\": {\n      \"PV01\": {\"energy\": 2.0}\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/inference",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "inference"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('iCharging urgent inference responds', function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "pm.test('Urgent EV receives maximum allocation', function () {",
              "  const body = pm.response.json();",
              "  pm.expect(body.actions['0'].AC000004_1).to.eql(4.6);",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "10 - Admin Unload (iCharging)",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/admin/unload",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "unload"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('iCharging pipeline unloaded', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.status).to.eql('unloaded');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "11 - Admin Load (breaker-only v0)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"manifest_path\": \"{{breakerOnlyManifestPath}}\",\n  \"agent_index\": {{agentIndex}},\n  \"artifacts_dir\": null,\n  \"alias_mapping_path\": \"{{breakerOnlyAliasPath}}\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/admin/load",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "load"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('breaker-only pipeline loaded', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.status).to.eql('loaded');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "12 - Inference (breaker-only limiter)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"features\": {\n    \"timestamp\": \"2025-11-07T08:00:00Z\",\n    \"non_shiftable_load\": 0,\n    \"solar_generation\": 0,\n    \"energy_price\": 0,\n    \"charging_sessions\": {\n      \"AC000004_1\": {\"power\": 2.4, \"electric_vehicle\": 11824},\n      \"AC000007_1\": {\"power\": 2.6, \"electric_vehicle\": 11823},\n      \"AC000005_1\": {\"power\": 2.8, \"electric_vehicle\": 11833},\n      \"AC000006_1\": {\"power\": 2.1, \"electric_vehicle\": 11825}\n    },\n    \"pv_panels\": {\n      \"PV01\": {\"energy\": 0}\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/inference",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "inference"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('breaker-only inference responds', function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "pm.test('All active chargers respect min/max and board limit', function () {",
              "  const body = pm.response.json();",
              "  const actions = body.actions['0'];",
              "  ['AC000004_1','AC000007_1','AC000005_1','AC000006_1'].forEach(function (cid) {",
              "    pm.expect(actions[cid]).to.be.above(1.59);",
              "    pm.expect(actions[cid]).to.be.below(4.61);",
              "  });",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "13 - Admin Unload (breaker-only)",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/admin/unload",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "unload"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('breaker-only pipeline unloaded', function () {",
              "  pm.response.to.have.status(200);",
              "  const body = pm.response.json();",
              "  pm.expect(body.status).to.eql('unloaded');",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "14 - Admin Load (ONNX iCharging sample)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"manifest_path\": \"{{onnxManifestPath}}\",\n  \"agent_index\": {{agentIndex}},\n  \"artifacts_dir\": null,\n  \"alias_mapping_path\": \"{{onnxAliasPath}}\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/admin/load",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "load"
          ]
        }
      }
    },
    {
      "name": "15 - Inference (ONNX iCharging sample)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"features\": {\n    \"charging_sessions\": {\n      \"AC000001_1\": {\"power\": 1.0, \"electric_vehicle\": 1},\n      \"AC000002_1\": {\"power\": 2.0, \"electric_vehicle\": 2},\n      \"AC000003_1\": {\"power\": 3.0, \"electric_vehicle\": 3},\n      \"AC000004_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000005_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000006_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000007_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000008_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000009_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000010_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000011_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000012_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000013_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"AC000014_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"ACEXT001_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"ACEXT002_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"ACEXT003_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"ACEXT004_1\": {\"power\": 0, \"electric_vehicle\": \"\"},\n      \"BB000018_1\": {\"power\": 0, \"electric_vehicle\": \"\"}\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/inference",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "inference"
          ]
        }
      }
    },
    {
      "name": "16 - Admin Unload (ONNX)",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/admin/unload",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "admin",
            "unload"
          ]
        }
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000"
    },
    {
      "key": "agentIndex",
      "value": "0"
    },
    {
      "key": "rbcManifestPath",
      "value": "/data/rule_based/artifact_manifest.json"
    },
    {
      "key": "ichargingManifestPath",
      "value": "/data/ichargingusecase_rule_based/artifact_manifest.json"
    },
    {
      "key": "ichargingAliasPath",
      "value": "/data/ichargingusecase_rule_based/aliases.json"
    },
    {
      "key": "breakerOnlyManifestPath",
      "value": "/data/ichargingusecase_v0/artifact_manifest.json"
    },
    {
      "key": "breakerOnlyAliasPath",
      "value": "/data/ichargingusecase_v0/aliases.json"
    },
    {
      "key": "onnxManifestPath",
      "value": "/data/ichargingusecase_onnx/artifact_manifest.json"
    },
    {
      "key": "onnxAliasPath",
      "value": "/data/ichargingusecase_onnx/aliases.json"
    }
  ]
}
